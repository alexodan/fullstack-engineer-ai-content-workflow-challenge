datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Campaign {
  id                   String        @id @default(uuid())
  name                 String
  description          String?
  defaultInstructions  String?       // Default AI generation instructions for this campaign
  createdAt            DateTime      @default(now())
  updatedAt            DateTime      @updatedAt
  contents             ContentPiece[]
}

model ContentPiece {
  id          String       @id @default(uuid())
  campaignId  String
  campaign    Campaign     @relation(fields: [campaignId], references: [id])
  type        String       @default("general") // headline, description, body, etc.
  language    String       @default("en")
  text        String?
  state       ContentState @default(DRAFT)
  aiMetadata  Json?        // keywords, tone, sentiment, etc (probably won't use it)
  reviewNotes String?
  reviewedBy  String?
  reviewedAt  DateTime?
  editedBy    String?
  editedAt    DateTime?
  history     Json?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  reviews     ReviewAction[]
}

model ReviewAction {
  id           String       @id @default(uuid())
  contentId    String
  contentPiece ContentPiece @relation(fields: [contentId], references: [id])
  reviewer     String       // maybe i wont use this, leaving it for now
  action       ReviewState
  comment      String?
  createdAt    DateTime     @default(now())
}

enum ContentState {
  DRAFT
  AI_SUGGESTED
  REVIEWED
  APPROVED
  REJECTED
  NEEDS_REVISION
}

enum ReviewState {
  APPROVED
  REJECTED
  EDITED
}
